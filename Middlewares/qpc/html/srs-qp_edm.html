<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP/C: Event Delivery Mechanisms</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="spexy-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <a href="https://www.state-machine.com" title="Quantum Leaps"><img alt="Logo" src="logo_ql.webp"/></a>
  </div>
   <div id="projectname">
    QP/C
    &nbsp;<span id="projectnumber">8.0.2</span>
   </div>
   <div id="projectbrief">Real-Time Embedded Framework</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('srs-qp_edm.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Event Delivery Mechanisms</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><span class="prev_button"><a class="el" href="srs-qp_sm.html">State Machines</a></span><span class="next_button"><a class="el" href="srs-qp_emm.html">Event Memory Management</a></span> </p><div style="clear:both"></div> <h1><a class="anchor" id="srs-qp_edm-intro"></a>
Concepts &amp; Definitions</h1>
<p>One of the main responsibilities of the QP Framework is to reliably and safely deliver <a class="el" href="srs-qp_evt.html">QP events</a> from various producers to Active Objects. The event delivery is <a class="el" href="srs-qp_ao.html#srs-qp_ao-asynch">asynchronous</a>, meaning that the producers only post events to Active Objects, but don't wait in-line for the processing of the events. Any part of the system can produce events, not necessarily only the Active Objects. For example, ISRs, device drivers, or legacy code running outside the framework can produce events. On the other hand, only Active Objects can consume QP events, because only Active Objects are guaranteed to have <a class="el" href="srs-qp_ao.html#srs-qp_ao-queue">event queues</a>.</p>
<p>Event delivery mechanisms can be broadly classified into the following two categories (see <a class="el" href="#srs-qp_fig-edm">Figure SRS-EDM</a>):</p>
<ol type="1">
<li><a class="el" href="#srs-qp_edm-post">Direct event posting</a>, when the producer of an event directly posts the event to the event queue of the consumer Active Object.</li>
<li><a class="el" href="#srs-qp_edm-ps">Publish-subscribe</a>, where a producer "publishes" an event to the framework, and the framework then delivers the event to all Active Objects that had "subscribed" to the event.</li>
</ol>
<p><a class="anchor" id="srs-qp_fig-edm"></a></p><div class="image">
<object type="image/svg+xml" data="srs-qp_edm.svg" width="1500px" style="pointer-events: none;"></object>
</div>
  <div class="caption"><center><em>Figure SRS-EDM: Event delivery mechanisms in the QP Framework</em></center></div><h2><a class="anchor" id="srs-qp_edm-post"></a>
Direct Event Posting</h2>
<p>Direct event posting is the simplest mechanism that allows producers to post events directly to the event queue of the recipient Active Object. <a class="el" href="#srs-qp_fig-edm">Figure SRS-EDM</a> illustrates this form of communication as red arrows directly connecting event producers and the consumer Active Objects.</p>
<p>Direct event posting is a "push-style" communication mechanism, in which recipients receive unsolicited events whether they "want" them or not. Direct event posting is well suited for situations where a group of Active Objects, or an Active Object and an ISR, form a subsystem providing a particular service, such as a communication stack, GPS capability, digital camera subsystem in a mobile phone, or the like. This style of event passing requires that the event producers "knows" the recipients and their interests in various events. The "knowledge" that a sender needs is, at a minimum, the handle (e.g., a pointer) to the recipient Active Object.</p>
<p>Direct event posting mechanism might increase the coupling among the components, especially when the recipients of the events are hard-coded inside the event producers. However, one way of reducing the coupling is to allow the recipients to "register" with the producers at runtime (e.g., event producer can store a pointer to the direct consumer of the events). That way the producer does not need to hard-code the recipient(s).</p>
<dl class="section remark"><dt>Remarks</dt><dd>QP Framework also provides "raw" thread-safe event queues without Active Objects behind them. Such "raw" thread-safe queues can be also used for direct event posting, but they cannot block (even when QP runs on top of a blocking RTOS kernel) and are mainly intended to directly deliver events to ISRs, that is, provide a communication mechanism from the Active Object level to the ISR level.</dd></dl>
<h2><a class="anchor" id="srs-qp_edm-ps"></a>
Publish-Subscribe</h2>
<p>Publish-subscribe event delivery is shown in <a class="el" href="#srs-qp_fig-edm">Figure SRS-EDM</a> as a "software bus" into which Active Objects "plug in" through the specified interface. Active Objects interested in certain events <b>subscribe</b> to one or more <a class="el" href="srs-qp_evt.html#srs-qp_evt-sig">event signals</a> by the QP Framework. When an event producer chooses to publish an event, QP Framework delivers the event to <em>all</em> subscribers, which entails event <em>multicasting</em> the event (sometimes incorrectly called broadcasting). Publication requests can originate asynchronously from many sources, not necessarily just from Active Objects. For example, events can be published from interrupts (ISRs), device drivers, or the "naked" threads (in case QP runs on top of a conventional RTOS/OS).</p>
<p>Publish-subscribe is a "pull-style" communication mechanism in which recipients receive only solicited (subscribed) events. The properties of the publish-subscribe model are:</p>
<ul>
<li>Producers and consumers of events don't need to know each other (loose coupling).</li>
<li>The events exchanged via this mechanism must be publicly known and must have the same semantics to all parties.</li>
<li>Publish-subscribe implies <b>event multicasting</b> in case a given <a class="el" href="srs-qp_evt.html#srs-qp_evt-sig">event signal</a> is subscribed by multiple Active Objects.</li>
<li>A "mediator" (QP Framework) is required to accept published events and to deliver them to all interested subscribers.</li>
<li>Many-to-many interactions (object-to-object) are replaced with one-to-many (object-to-mediator) interactions.</li>
</ul>
<h1><a class="anchor" id="srs-qp_edm-req"></a>
Requirements</h1>
<p><a id="a45_SRS_5FQP_5FEDM_5F00" name="a45_SRS_5FQP_5FEDM_5F00"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_00"></a>
SRS_QP_EDM_00</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_00</b>: <em>QP Framework shall provide direct event posting to Active Object instances based on the FIFO policy</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">The direct event posting mechanism shall post events to the <a class="el" href="srs-qp_ao.html#srs-qp_ao-queue">event queue</a> of the recipient Active Object utilizing the FIFO (First-In-First-Out) policy. Direct event posting with the default FIFO policy shall be available to all possible event producers, such as Active Objects, but also interrupts (ISRs), "device drivers", and "naked" threads of an RTOS (if an RTOS is used to run QP). </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Backward Traceability</b><br  />
</p>
<ul>
<li><a class="el" href="srs-qp_ao.html#SRS_QP_AO_20">SRS_QP_AO_20</a>: <em>Active Object abstraction shall provide an <u>event queue</u> for each Active Object instance</em></li>
<li><a class="el" href="srs-qp_ao.html#SRS_QP_AO_21">SRS_QP_AO_21</a>: <em>Active Object event queue shall provide <u>FIFO policy</u> for posting events from outside the Active Object</em> </li>
</ul>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<ul>
<li>SSR_QP_EDG_10: <em>QP/C Framework shall provide <u>event delivery guarantee</u> for the direct event posting mechanism.</em><ul>
<li>SSR_QA_EDG_10: <em>QP/C Application shall adequately size all event queues and event pools.</em></li>
</ul>
</li>
<li><a class="el" href="sas-qp_ctxt.html#SAS_QP_API">SAS_QP_API</a>: <em>QP Framework API</em> </li>
</ul>
</td></tr>
</table>
<p><a id="a46_SRS_5FQP_5FEDM_5F01" name="a46_SRS_5FQP_5FEDM_5F01"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_01"></a>
SRS_QP_EDM_01</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_01</b>: <em>QP Framework shall provide direct event <u>self</u>-posting to Active Object instances based on the LIFO policy</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">Self-posting means that a given Active Object instance posts event to its own event queue. Such self-posting mechanism shall use the same <a class="el" href="srs-qp_ao.html#srs-qp_ao-queue">event queue</a> as the default FIFO policy, but in addition to the default FIFO policy it should provide also the LIFO (Last-In-First-Out) policy. This self-posting with the LIFO policy shall use a distinctly different API than the default direct event posting with the FIFO policy. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Use case</b><br  />
</p>
<p class="endtd">Self-posting of events with the LIFO policy can be useful for recalling events that have been deferred by the Active Object instance. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Backward Traceability</b><br  />
</p>
<ul>
<li><a class="el" href="srs-qp_ao.html#SRS_QP_AO_20">SRS_QP_AO_20</a>: <em>Active Object abstraction shall provide an <u>event queue</u> for each Active Object instance</em></li>
<li><a class="el" href="srs-qp_ao.html#SRS_QP_AO_21">SRS_QP_AO_21</a>: <em>Active Object event queue shall provide <u>FIFO policy</u> for posting events from outside the Active Object</em> </li>
</ul>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<ul>
<li><a class="el" href="sas-qp_ctxt.html#SAS_QP_API">SAS_QP_API</a>: <em>QP Framework API</em> </li>
</ul>
</td></tr>
</table>
<p><a id="a47_SRS_5FQP_5FEDM_5F50" name="a47_SRS_5FQP_5FEDM_5F50"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_50"></a>
SRS_QP_EDM_50</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_50</b>: <em>QP Framework shall provide <u>publish-subscribe</u> event delivery mechanism</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">Publish-subscribe shall use direct event posting (default, reliable variant based on FIFO policy) as the underlying low-level mechanism to multicast the subscribed events. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<ul>
<li><a class="el" href="#SRS_QP_EDM_51">SRS_QP_EDM_51</a>: <em>The <u>publish-subscribe</u> event delivery mechanism shall be configurable and optional</em></li>
<li><a class="el" href="#SRS_QP_EDM_52">SRS_QP_EDM_52</a>: <em>QP Framework shall allow Active Object instances to subscribe to a given event signal at run-time.</em><ul>
<li><a class="el" href="sas-qp_ctxt.html#SAS_QP_API">SAS_QP_API</a>: <em>QP Framework API</em></li>
</ul>
</li>
<li><a class="el" href="#SRS_QP_EDM_53">SRS_QP_EDM_53</a>: <em>QP Framework shall allow Active Object instances to unsubscribe from a subscribed event signal at run-time.</em><ul>
<li><a class="el" href="sas-qp_ctxt.html#SAS_QP_API">SAS_QP_API</a>: <em>QP Framework API</em></li>
</ul>
</li>
<li><a class="el" href="#SRS_QP_EDM_55">SRS_QP_EDM_55</a>: <em>Event multicasting during publishing shall complete before the processing of the published events.</em></li>
<li><a class="el" href="sas-qp_ctxt.html#SAS_QP_API">SAS_QP_API</a>: <em>QP Framework API</em> </li>
</ul>
</td></tr>
</table>
<p><a id="a48_SRS_5FQP_5FEDM_5F51" name="a48_SRS_5FQP_5FEDM_5F51"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_51"></a>
SRS_QP_EDM_51</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_51</b>: <em>The <u>publish-subscribe</u> event delivery mechanism shall be configurable and optional</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">The QP Application shall initialize and configure the publish-subscribe delivery mechanism by supplying the maximum number of event signals that can be subscribed and a memory buffer to store the subscription information. As a special case, QP Application might choose not to initialize publish-subscribe, in which case the feature shall be inactive and shall not cause any waste of resources (RAM). </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Backward Traceability</b><br  />
</p>
<ul>
<li><a class="el" href="#SRS_QP_EDM_50">SRS_QP_EDM_50</a>: <em>QP Framework shall provide <u>publish-subscribe</u> event delivery mechanism</em> </li>
</ul>
</td></tr>
<tr>
<td><p class="starttd"><b>Use case</b><br  />
</p>
<p class="endtd">QP Application initializes the publish-subscribe event delivery for a given maximum number of event signals and provides memory buffer capable of holding that many signals for the maximum allowed number of Active Objects in QP Application (see <a class="el" href="srs-qp_ao.html#SRS_QP_AO_01">SRS_QP_AO_01</a>). </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a id="a49_SRS_5FQP_5FEDM_5F52" name="a49_SRS_5FQP_5FEDM_5F52"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_52"></a>
SRS_QP_EDM_52</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_52</b>: <em>QP Framework shall allow Active Object instances to subscribe to a given event signal at run-time.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">QP Framework shall provide API for Active Objects to subscribe one <a class="el" href="srs-qp_evt.html#srs-qp_evt-sig">event signal</a> at a time. The API shall be callable multiple times by a given Active Object to subscribe to multiple event signals. Event subscription requires initialization of the publish-subscribe feature and attempts to subscribe without prior initialization shall be treated as a programming error. Similarly, subscribing to an already subscribed signal (by the same Active Object) shall be treated as a programming error. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Backward Traceability</b><br  />
</p>
<ul>
<li><a class="el" href="#SRS_QP_EDM_50">SRS_QP_EDM_50</a>: <em>QP Framework shall provide <u>publish-subscribe</u> event delivery mechanism</em> </li>
</ul>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<ul>
<li><a class="el" href="sas-qp_ctxt.html#SAS_QP_API">SAS_QP_API</a>: <em>QP Framework API</em> </li>
</ul>
</td></tr>
</table>
<p><a id="a50_SRS_5FQP_5FEDM_5F53" name="a50_SRS_5FQP_5FEDM_5F53"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_53"></a>
SRS_QP_EDM_53</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_53</b>: <em>QP Framework shall allow Active Object instances to unsubscribe from a subscribed event signal at run-time.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">QP Framework shall provide API for Active Objects to unsubscribe one <a class="el" href="srs-qp_evt.html#srs-qp_evt-sig">event signal</a> at a time. The API shall be callable multiple times by a given Active Object to unsubscribe from multiple event signals. Event un-subscription requires initialization of the publish-subscribe feature and attempts to unsubscribe without prior initialization shall be treated as a programming error. Similarly, unsubscribing from a signal that has not been subscribed shall be treated as a programming error. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Backward Traceability</b><br  />
</p>
<ul>
<li><a class="el" href="#SRS_QP_EDM_50">SRS_QP_EDM_50</a>: <em>QP Framework shall provide <u>publish-subscribe</u> event delivery mechanism</em> </li>
</ul>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<ul>
<li><a class="el" href="sas-qp_ctxt.html#SAS_QP_API">SAS_QP_API</a>: <em>QP Framework API</em> </li>
</ul>
</td></tr>
</table>
<p><a id="a51_SRS_5FQP_5FEDM_5F54" name="a51_SRS_5FQP_5FEDM_5F54"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_54"></a>
SRS_QP_EDM_54</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_54</b>: <em>QP Framework shall allow Active Object instances to unsubscribe from all subscribed event signals at run-time.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">QP Framework shall provide API for Active Objects to unsubscribe from all <a class="el" href="srs-qp_evt.html#srs-qp_evt-sig">event signals</a> at ones. Event un-subscription requires initialization of the publish-subscribe feature and attempts to unsubscribe without prior initialization shall be treated as a programming error. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<ul>
<li><a class="el" href="sas-qp_ctxt.html#SAS_QP_API">SAS_QP_API</a>: <em>QP Framework API</em> </li>
</ul>
</td></tr>
</table>
<p><a id="a52_SRS_5FQP_5FEDM_5F55" name="a52_SRS_5FQP_5FEDM_5F55"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_55"></a>
SRS_QP_EDM_55</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_55</b>: <em>Event multicasting during publishing shall complete before the processing of the published events.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">The purpose of this requirement is to prevent event publishing from creating unexpected event sequences when QP Framework runs on top of a <em>preemptive</em> kernel. As specified in <a class="el" href="#SRS_QP_EDM_50">SRS_QP_EDM_50</a>, event multicasting (required when a given event signal is subscribed by multiple Active Objects) uses the default direct event posting mechanism. However, if the priority of the event producer is lower than the priority of the recipient Active Object, direct event posting would normally lead to preemption (before multicasting completes). Such a preemption would then cause the high-priority Active Object to immediately process the published event, which might produce other events. These other events would then appear in the event queues of Active Objects before the originally published event. This would generate a <b>confusing event sequence</b>. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Backward Traceability</b><br  />
</p>
<ul>
<li><a class="el" href="#SRS_QP_EDM_50">SRS_QP_EDM_50</a>: <em>QP Framework shall provide <u>publish-subscribe</u> event delivery mechanism</em> </li>
</ul>
</td></tr>
<tr>
<td><p class="starttd"><b>Use Case</b><br  />
</p>
<p class="endtd">QP Framework can fulfill this requirement by preventing preemption during the event multicasting (only needed when QP Framework runs on top of a preemptive kernel). The preemption should be prevented only for the priorities of Active Objects involved in this particular multicasting. An ideal mechanism for that is selective scheduler locking based on priority ceiling protocol. The priority ceiling shall be set to the highest priority subscriber to a given event. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a id="a53_SRS_5FQP_5FEDM_5F80" name="a53_SRS_5FQP_5FEDM_5F80"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_80"></a>
SRS_QP_EDM_80</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_80</b>: <em>All event delivery mechanisms shall be <u>free of concurrency hazards</u>.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">"Free of concurrency hazards" means free of such hazards as as race conditions and data races. It also means that QP Framework must ensure that the <a class="el" href="srs-qp_ao.html#srs-qp_ao-curr">current event</a> does not change (e.g., is not corrupted or prematurely recycled) throughout all RTC steps it is involved in. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a id="a54_SRS_5FQP_5FEDM_5F81" name="a54_SRS_5FQP_5FEDM_5F81"></a> </p>
<h2><a class="anchor" id="SRS_QP_EDM_81"></a>
SRS_QP_EDM_81</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SRS_QP_EDM_81</b>: <em>All event delivery mechanism shall be <u>deterministic</u>.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">"Deterministic" means that the process of event posting or publishing has a known and constant upper bound of its execution time. In case of event publishing, QP Framework cannot meet this requirement alone because the time of event multicasting depends on the number of subscribers to a given event, so it is not constant. Therefore, QP Application must be designed in such a way that the multicasting time is acceptable. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Forward Traceability (truncated to 2 level(s))</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><span class="prev_button"><a class="el" href="srs-qp_sm.html">State Machines</a></span><span class="next_button"><a class="el" href="srs-qp_emm.html">Event Memory Management</a></span>   </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="srs-qp.html">Software Requirements Specification</a></li>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2025 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 8.0.2</b> &nbsp;|&nbsp; created with <a title="Spexygen: traceable specifications" href="https://github.com/QuantumLeaps/spexygen"><em>Spexygen</em></a>
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2025 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 8.0.2</b> &nbsp;|&nbsp; created with <a title="Spexygen: traceable specifications" href="https://github.com/QuantumLeaps/spexygen"><em>Spexygen</em></a>
</small></address>
    </li>
  </ul>
</div>
</body>
</html>
