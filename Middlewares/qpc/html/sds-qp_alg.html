<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP/C: Algorithm Viewpoint</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="spexy-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <a href="https://www.state-machine.com" title="Quantum Leaps"><img alt="Logo" src="logo_ql.webp"/></a>
  </div>
   <div id="projectname">
    QP/C
    &nbsp;<span id="projectnumber">8.0.2</span>
   </div>
   <div id="projectbrief">Real-Time Embedded Framework</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('sds-qp_alg.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Algorithm Viewpoint</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><span class="prev_button"><a class="el" href="sds-qp_time.html">Time Viewpoint</a></span><span class="next_button"><a class="el" href="sds-qp_ifc.html">Interface Viewpoint</a></span> </p><div style="clear:both"></div> <p>The <b>Algorithm Viewpoint</b> focuses on the internal details and logic of design entities. This design viewpoint frames the following design concerns:</p><ul>
<li>analysis of algorithms in regard to their correctness under various scenarios</li>
<li>analysis of algorithms in regard of their efficiency and time-space performance</li>
<li>analysis of algorithms in regard of their testability</li>
</ul>
<h1><a class="anchor" id="sds-qp_qhsm"></a>
QHsm Implementation View</h1>
<p>The <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> class (see <a class="el" href="sds-qp_struct.html#sds-qp_fig-cls">Figure SDS-CLS [13]</a>) implements the state machine strategy optimized for "manual coding" (see <a class="el" href="srs-qp_sm.html#SRS_QP_SM_20">SRS_QP_SM_20</a>). The <a class="el" href="sds-qp_state.html#sds-qp_state-hsm">QHsm Design View</a> describes how <em>QP Application</em> implements hierarchical state machines <em>based</em> on the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> class. This section describes the internal design of the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> class.</p>
<p><a id="a161_SDS_5FQP_5FQHsm_5Fctor" name="a161_SDS_5FQP_5FQHsm_5Fctor"></a> </p>
<h2><a class="anchor" id="SDS_QP_QHsm_ctor"></a>
SDS_QP_QHsm_ctor</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QHsm_ctor</b>: <em><a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> Constructor</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">The <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> constructor associates the state machine with its <a class="el" href="#SDS_QP_QHsm_init">top-most initial-transition</a>. The top-most initial transition is not actually executed at this point. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Pseudocode</b><br  />
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> QHsm_ctor(<a class="code hl_class" href="struct_q_hsm.html">QHsm</a> * <span class="keyword">const</span> me, <a class="code hl_typedef" href="qp_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a> <span class="keyword">const</span> initial);</div>
<div class="ttc" id="aqp_8h_html_a797a6e3e20119fcb0911cffb94e49543"><div class="ttname"><a href="qp_8h.html#a797a6e3e20119fcb0911cffb94e49543">QStateHandler</a></div><div class="ttdeci">QState(* QStateHandler)(void *const me, QEvt const *const e)</div><div class="ttdoc">Pointer to a state-handler function.</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00148">qp.h:148</a></div></div>
<div class="ttc" id="astruct_q_hsm_html"><div class="ttname"><a href="struct_q_hsm.html">QHsm</a></div><div class="ttdoc">Hierarchical State Machine class (QHsm-style state machine implementation strategy)</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00254">qp.h:254</a></div></div>
</div><!-- fragment -->  </td></tr>
</table>
<p><a id="a162_SDS_5FQP_5FQHsm_5Finit" name="a162_SDS_5FQP_5FQHsm_5Finit"></a> </p>
<h2><a class="anchor" id="SDS_QP_QHsm_init"></a>
SDS_QP_QHsm_init</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QHsm_init</b>: <em><a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> Top-most Initial Transition</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd">The top-most initial transition in a hierarchical state machine might be complex because the UML semantics require "drilling" into the state hierarchy with any nested initial transitions encountered in the target states until the leaf state is reached. Unfortunately, this direction of navigation through the state hierarchy is opposite to the natural direction. As you recall, a <a class="el" href="sds-qp_state.html#SDS_QA_QHsm_state">hierarchical state-handler function</a> provides the <em>superstate</em>, so it's easy to traverse the state hierarchy from substates to superstates. Although this order is very convenient for the efficient implementation of the most frequently used <a class="el" href="#SDS_QP_QHsm_dispatch">dispatch operation</a>, entering states is harder. The solution implemented in the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> class is to use an automatic array <code>path[]</code> to record the <b>exit path</b> from the target state of the initial transition source, without executing any actions. This is achieved by calling the state handlers with the reserved <code>QEP_EMPTY_SIG</code>_ signal, which causes every state handler to immediately return the superstate without executing any other actions. These superstates are saved in the <code>path[]</code> array until the current state is reached. The stored <code>path[]</code> array is subsequently played backward to <em>enter</em> the target substates (from superstates to substates), which is the exact reversed order in which they were visited. </p>
</td></tr>
<tr>
<td><p class="starttd"><b>Pseudocode</b><br  />
</p>
<div class="fragment"><div class="line">[1] <span class="keywordtype">void</span> QHsm_init_(<a class="code hl_class" href="struct_q_hsm.html">QHsm</a> * <span class="keyword">const</span> me, <span class="keywordtype">void</span> <span class="keyword">const</span> * <span class="keyword">const</span> par) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// execute the top-most initial tran.</span></div>
<div class="line">[2]     r = (*me-&gt;<a class="code hl_variable" href="struct_q_asm.html#ac2276f6f26281dc71979c334624e5cd4">temp</a>.<a class="code hl_variable" href="union_q_asm_attr.html#ad88ec9cc106b1590a4b9cc5898d768e8">fun</a>)(me, par);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// find all superstates of the target state and store it in array path[]</span></div>
<div class="line">[3]     . . .</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// drill down into the state hierarchy with initial transitions...</span></div>
<div class="line">[4]     QHsm_enter_target_(me, &amp;path[0], ip);</div>
<div class="line">    }</div>
<div class="ttc" id="astruct_q_asm_html_ac2276f6f26281dc71979c334624e5cd4"><div class="ttname"><a href="struct_q_asm.html#ac2276f6f26281dc71979c334624e5cd4">QAsm::temp</a></div><div class="ttdeci">union QAsmAttr temp</div><div class="ttdoc">Temporary storage for target/act-table etc.</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00184">qp.h:184</a></div></div>
<div class="ttc" id="aunion_q_asm_attr_html_ad88ec9cc106b1590a4b9cc5898d768e8"><div class="ttname"><a href="union_q_asm_attr.html#ad88ec9cc106b1590a4b9cc5898d768e8">QAsmAttr::fun</a></div><div class="ttdeci">QStateHandler fun</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00168">qp.h:168</a></div></div>
</div><!-- fragment -->  </td></tr>
</table>
<p><a id="a163_SDS_5FQP_5FQHsm_5Fdispatch" name="a163_SDS_5FQP_5FQHsm_5Fdispatch"></a> </p>
<h2><a class="anchor" id="SDS_QP_QHsm_dispatch"></a>
SDS_QP_QHsm_dispatch</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QHsm_dispatch</b>: <em><a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> Event Dispatching</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a id="a164_SDS_5FQP_5FQHsm_5Ftran-simple" name="a164_SDS_5FQP_5FQHsm_5Ftran-simple"></a> </p>
<h2><a class="anchor" id="SDS_QP_QHsm_tran-simple"></a>
SDS_QP_QHsm_tran-simple</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QHsm_tran-simple</b>: <em><a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> Simple Transition</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a id="a165_SDS_5FQP_5FQHsm_5Ftran-complex" name="a165_SDS_5FQP_5FQHsm_5Ftran-complex"></a> </p>
<h2><a class="anchor" id="SDS_QP_QHsm_tran-complex"></a>
SDS_QP_QHsm_tran-complex</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QHsm_tran-complex</b>: <em><a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> Complex Transition</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="sds-qp_qmsm"></a>
QMsm Implementation View</h1>
<p>The <a class="el" href="struct_q_msm.html" title="Hierarchical State Machine class (QMsm-style state machine implementation strategy)">QMsm</a> class (see <a class="el" href="sds-qp_struct.html#sds-qp_fig-cls">Figure SDS-CLS [14]</a>) derived from <a class="el" href="struct_q_asm.html" title="Abstract State Machine class (state machine interface)">QAsm</a> implements the state machine strategy optimized for "automatic code generation" (see <a class="el" href="srs-qp_sm.html#SRS_QP_SM_21">SRS_QP_SM_21</a>). The <a class="el" href="sds-qp_state.html#sds-qp_state-msm">QMsm Design View</a> describes how QP Applications implement hierarchical state machines <em>based</em> on the <a class="el" href="struct_q_msm.html" title="Hierarchical State Machine class (QMsm-style state machine implementation strategy)">QMsm</a> class. This section describes how the the <a class="el" href="struct_q_msm.html" title="Hierarchical State Machine class (QMsm-style state machine implementation strategy)">QMsm</a> class itself is <b>internally implemented</b>.</p>
<p><a id="a166_SDS_5FQP_5FQMsm_5Fctor" name="a166_SDS_5FQP_5FQMsm_5Fctor"></a> </p>
<h2><a class="anchor" id="SDS_QP_QMsm_ctor"></a>
SDS_QP_QMsm_ctor</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QMsm_ctor</b>: <em><a class="el" href="struct_q_msm.html" title="Hierarchical State Machine class (QMsm-style state machine implementation strategy)">QMsm</a> Constructor</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a id="a167_SDS_5FQP_5FQMsm_5Finit" name="a167_SDS_5FQP_5FQMsm_5Finit"></a> </p>
<h2><a class="anchor" id="SDS_QP_QMsm_init"></a>
SDS_QP_QMsm_init</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QMsm_init</b>: <em><a class="el" href="struct_q_msm.html" title="Hierarchical State Machine class (QMsm-style state machine implementation strategy)">QMsm</a> Top-most Initial Transition</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a id="a168_SDS_5FQP_5FQMsm_5Fdisp" name="a168_SDS_5FQP_5FQMsm_5Fdisp"></a> </p>
<h2><a class="anchor" id="SDS_QP_QMsm_disp"></a>
SDS_QP_QMsm_disp</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QMsm_disp</b>: <em><a class="el" href="struct_q_msm.html" title="Hierarchical State Machine class (QMsm-style state machine implementation strategy)">QMsm</a> Event Dispatching</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a id="a169_SDS_5FQP_5FQMsm_5Ftran" name="a169_SDS_5FQP_5FQMsm_5Ftran"></a> </p>
<h2><a class="anchor" id="SDS_QP_QMsm_tran"></a>
SDS_QP_QMsm_tran</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QMsm_tran</b>: <em><a class="el" href="struct_q_msm.html" title="Hierarchical State Machine class (QMsm-style state machine implementation strategy)">QMsm</a> Transition</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a id="a170_SDS_5FQP_5FQMsm_5Ftat" name="a170_SDS_5FQP_5FQMsm_5Ftat"></a> </p>
<h2><a class="anchor" id="SDS_QP_QMsm_tat"></a>
SDS_QP_QMsm_tat</h2>
<table class="doxtable">
<tr>
<td style="text-align:left; width:var(--content-maxwidth)"><p class="starttd"><b>SDS_QP_QMsm_tat</b>: <em><a class="el" href="struct_q_msm.html" title="Hierarchical State Machine class (QMsm-style state machine implementation strategy)">QMsm</a> Transition Action Tables</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><p class="starttd"><b>Description</b><br  />
</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><span class="prev_button"><a class="el" href="sds-qp_time.html">Time Viewpoint</a></span><span class="next_button"><a class="el" href="sds-qp_ifc.html">Interface Viewpoint</a></span>   </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="sds-qp.html">Software Design Specification</a></li>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2025 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 8.0.2</b> &nbsp;|&nbsp; created with <a title="Spexygen: traceable specifications" href="https://github.com/QuantumLeaps/spexygen"><em>Spexygen</em></a>
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2025 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 8.0.2</b> &nbsp;|&nbsp; created with <a title="Spexygen: traceable specifications" href="https://github.com/QuantumLeaps/spexygen"><em>Spexygen</em></a>
</small></address>
    </li>
  </ul>
</div>
</body>
</html>
